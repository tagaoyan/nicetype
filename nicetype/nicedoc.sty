\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nicedoc}[2012/06/13 v1.0 Nice Document under XeLaTeX]

% This should be used with nicetype.

% \ProcessOptions\relax

\RequirePackage{fancyvrb}
\RequirePackage{listings}

\lstMakeShortInline{"}

\newenvironment{codex}
{\VerbatimEnvironment
\begin{VerbatimOut}{\jobname.ext}}
{\end{VerbatimOut}
\noindent
\begin{minipage}[c]{0.44\textwidth}
\lstinputlisting[nolol,basicstyle=\ttfamily\small]{\jobname.ext}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\textwidth}
\input{\jobname.ext}
\end{minipage}
}

\newenvironment{codeX}
{\VerbatimEnvironment
\begin{VerbatimOut}{\jobname.ext}}
{\end{VerbatimOut}
\noindent
\lstinputlisting[nolol]{\jobname.ext}
\par
\input{\jobname.ext}}

\newcommand{\inputX}[1]{%
\lstinputlisting[nolol]{#1}
\par
\input{#1}}

\newcommand{\inputx}[1]{%
\begin{minipage}[c]{0.44\textwidth}
\lstinputlisting[nolol,basicstyle=\ttfamily\small]{#1}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\textwidth}
\input{#1}
\end{minipage}}

\endinput